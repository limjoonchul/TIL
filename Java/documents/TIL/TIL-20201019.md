# 오늘 해야 할 일
* Spring 강의 4개 듣고 내용 정리하기
* DB 수업 듣고, 내용 정리 및 복습하기
* 프로젝트 테스트 부분 공부해서 구현해보기

# 오늘 한 일
* Spring 강의 섹션4 스프링 빈과 의존관계 2개, 회원관리 예제 -웹 mvc개발 2개를 강의를 들었다.
   * 깃 push하는게 key가 안맞아서 그거 찾느라 시간 낭비하느라 하나 마저 못봄!
* DB 강의를 진행했는데 MySQL WorkBench를 깔고, AWS를 이용해서 서버를 만들고, ubuntu로 가상운영체제 환경을 만들어서 MySQL에 대한 환경설정을 했다
 
# 오늘 공부하면서 배운 점
## 컴퓨터 프로그래밍
* cpu - 연산처리장치 
* 운영체제 - 물리적인 장치를 컨트롤해주는거 똑같은 하드웨어로도 성능이 달라진다 윈도우가 젤 안좋음
* 커널 - 하드웨어를 컨트롤 하는 것 
* 엑셀을 실행하면 램에 올라가서 연산을 수행하고 코드를작성한대로 진행이 된다.

### 프로그래밍이 어떻게 동작되나
* 코드를 0,1로 바꿔주는것이 컴파일러이다 언어별로 컴파일러가 다르다. 
* 컴파일러가 어떻게 동작되는지에 따라 2개로나눠짐
* 컴파일러 언어 : 자바 코드를 한번에 다 번역을 한다음에 수행
  * 장점: 속도가 빠르다, 빌드를 하는과정이 컴파일 하는 과정이다.  빌드의 과정을 거쳐야 동작시킬수있다.
  빌드가끝나고 다음 동작이 수행된다 
  * 단점: 속도가 느리다 
* 인터프리티 언어 : 첫번째줄 번역하고 수행 하고 다음줄 번역하고 수행 한줄한줄 수행 한 줄 번역하고 수행하고 하면 시간이 오래걸리고 번역하는 과정이 필요없다
속도가 느린데 빌드과정이 없어서 바로 실행할 수 있다.
* 컴파일러언어가 문법이 더어려움 인터프리티가 좀 더 쉽다

### 코딩 / 알고리즘
* 코끼리를 냉장고에 넣는 목적일 때 알고리즘은 이걸 수행하기 위한 절차이다. 
* 이 절차를 컴퓨터가 수행할 수 있는 코드로 하는 것이 코딩이다.
* 알고리즘이 어려운것이다.. 회사에서 테스트함
* 항상 더 효율적인 방법을 생각하는게 좋다.


### 서버와 클라이언트 아키텍쳐 
* 클라이언트 - 브라워져를 통해 서버에 데이터를 요청
* 서버 - 클라이언트가 데이터를 요청하면 요청에 따라 데이터를 전송 워크벤치가 클라이언트이다
* 서버는 데이터베이스가 설치되어있는 컴퓨터라고생각하면된다 데이터베이스 서버 중간에는 인터넷망으로 데이터를 주고받는 것이 이루어진다. 

### URL
* http 는 프로토콜 통신규칙, 체크섬은 문제가 있는지 확인하는 것,보내는 쪽 소스 받는쪽 데스티네이션이다
* 클라이언트에서 서버로 보낼 때 암호를 안한게 http, 암호를 한게 https
* 스니핑 중간에 데이터를 빼앗는 것 https를 써서 방지할 수 있다.
* 클라이언트에서 서버로 데이터를 보낼 때 데이터를 암호화해서 데이터를 전송하고 서버에서 복호화해서 받는 것이다.

* 도메인은 ip주소랑 매핑이 된다 
* 포트는 서버에들어가는 게이트, 문같은 것이다.
* 포트별로 서비스가 정해져있다 http 는 80, https: 443, mysql - 3306,  몽고디비-27017번 포트를 사용한다
* /main/ - path이다.디렉토리에 대한 경로
* read.nhn - 저장된 파일 경로 , page 
* was에서 db데이터를 가져와소 html 구조안에 값을 넣어서 화면에 전송한다

* Get - url에 데이터가 포함된다 -> 데이터가 노출이되고 길이 제한이 있다. 검색할 때 사용
* Post - body에 데이터가 포함된다 -> 데이터가 숨겨짐 로그인할 때 많이사용

### 인터넷이란?
* 컴퓨터를 연결해서 tcp/ip라는 통신프로토콜을 이용해 정보를 주고받는 컴퓨터 네트워크

#### 어떻게 인터넷을 사용하고있나
* 해저케이블을 이용하여 전세계 서버에 접속하여 인터넷을 사용하고 있다.
* 공유기를 가서 kt망을 써서(사설망)  백본망으로간다 부산에간다 부산해저케이블을 이용해서 미국으로 간다
* 무선은 주파수로 하기 때문에 불안정되서 재전송을 많이해서 속도가 느린 것이다.
* 백본망은 한국전력이 가지고 있다 송전탑이 데이터도 흐르고 있다.

#### OSI 7 Layer
* 물리계층은 선, 변조 방식, 이 들어있따
* 데이터링크 계층 
* 네트워크 - ip정보
* 트랜스포트 - tcp /ip
* 세션 프레젠테이션 어플리케이션은 - 어플리케이션 

* 4계층까지 까서 어느 서버로 보낼지 확인하고 서버가 다시 까서 클라이언트한테 보내준다
* 트랜스포트 부분까지는 최소 알고 있어야 한다.

### Cookie & Session & Cache
* 쿠키 - 쿠키는 브라우저의 하드디스크영역 저장되는 것이 쿠키이다. 로그인에 대한 정보를 브라우저가 저장하고 있는것이다.
우리의 브라우저에 상품정보가 정되어있는 것

* 세션 - 메모리상에 저장된다 연결정보라고 생각하면 된다? 클라이언트하고 서버하고 요청응답을 하는데
이 연결하는 정보들이 세션이다. ssl이 접속하고 있는것이 세션이다

* 캐쉬는 - 메모리에 저장되어있는 것 (Ram) 서버의 캐쉬영역에 저장하고 있어서 바로바로
클라이언트에서 가져가면 훨씬 빠르게 데이터를 줄 수 있다.
램이 하드디스크보다 빠르다 하드디시크를 램에 올려서 cpu연산을하면 속도를 훨씬빠르다.
가상메모리를 쓰면 느려진다. 

### http status code
* 2xx - 성공
* 3xx - 요청 완료를 위해 추가 작업 조치가 필요하다
* 4xx - 리퀘스트 에러, 서버가없다,요청의 문법이 잘못되었거나 요청을 처리할 수 없다
* 5xx - 서버에러, 정상적인 url이 아닐 때 뜬다, 서버가 명백히 유효한 요청에 대해 충족을 실패했다

#### web 언어 프레임워크
* 클라이언트는 html , css, javascipt
* 서버는 파이썬, 자바, 루비, 노드js , scala
* 채팅이 소켓 통신이다.

* 폴링방식  클라이언트에서 요청이와야 서버가 응답을 할 수 있다.
* 소켓방식은 클라이언트와 서버가 소켓으로 연결되어있어서 요청이 안와도 서버에서 보낼 수 있다

* 클라우드 서버 - 물리적인 서버를 논리적인서버로 나누는 것 / 치고 원하는 파일을 치면 검색이 가능하다.

* 소스 0.0.0.0/0 은 /0 은 서버에 접속할수 있는 보안을 설정할 수 있다.
* 0.0.0.0 -> 모든 IP(클라이언트)에서 접속 가능 
* 32.4.5.1 -> 해당 소스를 가진 클라이언트만 접속 가능
* 0.0.0.0/0 -> / 0의 의미는 0 ~ 225 범위의 아이피 접속 가능 
* 0.0.0.0/16 -> 뒷 부분 두개만 0 ~ 225

* 공유기가 있고 컴퓨터 1,2,3이 있다 서버에서 값이 들어올 때 공유기에서 컴퓨터로 들어올때 이 것이 IP가  인트라넷이다.

### 프라이빗 IP주소가 인트라넷 
* .ssh - .이붙으면 숨김파일을 의미한다.
* pc가 있을 때 서버가 있고 서버를 컨트롤하는것 터미널에서 서버쪽으로 ssh라는 프토콜로 연결이
되는것이다 22번포트를 사용하는 것 세션이 연결된것이다. 클라이언트에서 서버쪽으로 명령을 내릴 수 있는 것


* ssh -i ~/.ssh/패스워드 계정@서버(IP 주소) 로 접속을 하는 것이다.
* scp -i ~/.ssh/패스워드 ~/sql/* 계정@IP주소:~/ 로컬에있는 파일들을 서버쪽으로 옮길 때 사용함

* free -h 우분트 프로그램을 업데이트하는 것


### 데이터베이스의 개요
* DB - 데이터를 통합하여 관리하는 데이터의 집합
* DBMS - 데이터베이스를 관리하는 미들웨어 시스템, 데이터베이스 관리 시스템


* RDBMS - 관계형 데이터베이스, 데이터의 테이블 사이에 키 값으로 관계를 가지고 있는 데이터베이스
* Nosql - 테이블과 테이블을 합쳐서 가져올수 없다 독립적이다. 

* 관계가있어서 각테이블에 적은 데이터를 넣어도 되는데 nosql은 독립적이기 때문에 많은 데이터를 넣어야한다.
* RDBMS가 같은 데이터를 넣었을 때 데이터양이 많다, 데이터를 가져오는 속도가 빠르다 인설트가 느리다
안정성이 높다

* NOSQL 데이터를 가져오는 속도가 느린데 인설트는 빠르다, 로그데이터를 쌓을 때 사용한다

#### mysql 
- 오픈소스이며 다중사용자(권한같은걸 설정할 수 있다는 것이다.)와 다중 스레드 지원 
- 표준 sql : 주로사용하는 sql을 사용한다는 의미이다. 표준sql을 사용하면 비슷하게 사용할 수 있다
- 작고 강력하며 가격이 저렴하다.

## 스프링 빈과 의존관계
* 회원 컨트롤러가 회원서비스와 회원 리포지토리를 사용할 수 있게 의존관계를 만든다.

* 클래스를 만들면 스프링에서 컨테이너를 만드는데 @Controller를 해놓으면 해당클래스 객체를 생성해서 넣어 두고 관리한다.
이런것이 스프링 컨테이너에서 스프링 빈이 관리된다라고 표현한다.

* 각각의 클래스에 Controller, Service, Repository 애노테이션을 써준다, 정형화된 패턴이다.
* Controller를 통해서 외부 요청을 받고 Service에서 비즈니스로직을 만들고, Repository에서 데이터를 저장한다.

* 스프링이 관리를 하게 되면 스프링 컨테이너에 등록을하고 컨테이너에서 받아서 쓰도록 바꿔야한다.
왜냐하면 만약 MemberService를  new로 객체를 생성해서 사용할 수 있지만, 멤버 컨트롤러 말고 다른 컨트롤러들이 객체를 가져다가 쓸 수 있게 된다. 
그런데 new 해서 객체를 생성해도 별다른 기능이 없고, 여러개의 객체를 생성해서 사용할 필요가 없을 수 있다. 그래서 객체를 공용으로 쓰는게 좋다.
스프링은 스프링 컨테이너에 스프링 빈을 등록할때, 기본적으로 싱글톤으로 등록을한다(유일하게 하나만 등록해서 공유한다.) 따라서 같은 스프링 빈이면 모두 같은 인스턴스이다.

### 스프링 빈을 등록하는 2가지 방법
* 컴포넌트 스캔과 자동 의존관계 설정 (우리가한 방법 애노테이션을 써주는 방법이 컴포넌트 스캔이다.)
원래는 @Component라고 적어주면 되는데 우리는 @Service이렇게 했는데 이유는 @Service에 이미 @Component가 등록이 되어있다.

* 컴포넌트를 사용하는 상황은 @SpringBootApplication이 있는 클래스부터 시작해서 그 클래스가
속해있는 패키지와 하위 패키지에 대해서만 자동으로 스프링이 뒤져서 스프링 빈에 등록한다.
그래서 다른 패키지에서 만들어서 컴포넌트를 사용한다해도 컴포넌트 스캔의 대상이 되지 않는다.
@ComponentScan이 있어야 찾아서 들어온다.
 
### 자바 코드로 직접 스프링 빈 등록하기
* 컨트롤러는 컴포넌트 스캔으로 냅두고, Service, Repository는 @Bean 애노테이션을 사용하여서
스프링 빈에 등록하고, Service는 Repository를 가지고 있어야 하니깐, Service에 Repository를 넣어준다.

* DI에는 필드 주입, setter 주입, 생성자 주입 3가지 방법이 있다.
의존관계가 실행중에 동적으로 변하는 경우는 거의 없으므로 생성자 주입을 권장한다.

* 필드 주입은 별로 좋지 않음 왜냐하면 바꿀 수 있는 방법이 없다 스프링 뜰 때만 넣어주고
중간에 바꿀 수 있는 방법이 없다.

* setter 주입은 단점은 누군가가 멤버컨트롤을 호출했을 때 public으로 열려 있어야 한다.
setMemberService를 중간에 바꿔치기할 이유가 없다 그런데 얘가 public하게 노출이 되는것이다.
그래서 중간에 잘 못 바꾸면 문제가 생기게 된다. 애플리케이션 로딩할 때 조립할 때 바꾸는 것이지,
한번 세팅을하고나면 바꿀일이 없다.

* 그래서 생성자 주입 사용을 권장한다.
처음에 애플리케이션 조립된다고 표현하는데 스프링컨테이너에 올라가고 세팅이되는 시점에
파라미터로 들어오고 끝난다.

* 처음 생성할때 세팅하고 그 후에 막을 수 가 있다.

* 실행중에 동적으로 변경된다는 것은 서버가 떠있는데 중간에 바꿔치기가 되는 것이다
그런데 그런 일이 거의 없어서 바꿀일이 없다라고 말한 것  그럴 일이 있을 때는 config파일을 수정하고
서버에 다시 올린다.

* 상황에 따라 구현 클래스를 변경해야 하는 것은 이 강의에서 설정상 저장소를 아직 정하지 않은
가상시나리오를 통해서 진행이 되는데 나중에 Repository를 db로 바꾼던가 하는 상황을 진행할 것인데
나머지 코드에 손대는 것이 없이 바꿔치기 할 수 있다. 그런 상황을 만들기 위해서이다.

* 그래서 컴포넌트 스캔을 사용할 때는 여러 코드를 바꿔야하는데 자바 코드로 직접 스프링 빈에 등록하는 방법은
설정파일만 바꿔주면 된다. 직접 설정파일을 운영할 때 의 장점이다.

* 스프링 컨테이너에 올라가 있는 것만 @AutoWired가 동작을 한다.


### 회원 웹 기능 - 홈 화면 추가
* 원래 localhost:8080으로 들어가면 static폴더의 index.html파일이 화면에 띄워지게 되었는데,
정적 콘텐츠에서 설명할 때 먼저 스프링 컨테이너에서 먼저 해당 주소가 있는지 찾고, 없을 때
정적 콘텐츠로 가서 index.html이 띄워지게 되는 것이였다. 그런데 여기서 '/'를 매핑하는 HomeController를
작성해놨기 때문에 컨테이너에서 이 것을 먼저 찾고 home.html을 실행을 하는 것이다.
* get - URL에 창에 enter치는 면 get매핑, 조회할 때 사용
* post - 데이터를 form같은데 전달할 때 사용
* 스프링이 createMemberForm.html에 있는 input태그의 name="name"을 보고 입력받은 값을 MemberForm의 name이랑 매핑을 해줘서
여기에 입력받은 값을 넣어준다. setName을 통해서 값이 들어간다.